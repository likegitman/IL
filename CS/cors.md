# CORS
흔히 CORS 오류라고 부르는데 CORS는 오류의 종류가 아닌 **개념**이다.
Cross-Origin Resource Sharing의 약자로 다른 출처에 있는 자원을 요청한다고 했을 때 이를 교차 출처 요청이라고 부른다.

> HTTP 헤더를 사용해서 한 출처에서 실행 중인 애플리케이션이 다른 출처의 리소스에 접근할 수 있는 권한을 부여하도록
> 브라우저에 알려주는 보안 정책이자 체제이다.

교차 출처가 일어나는 때는 웹 애플리케이션이 리소스가 자신의 출처인 도메인, 프로토콜, 포트가 다를 때 교차 출처 요청을 보낸다.

<img width="1408" alt="d" src="https://github.com/likegitman/IL/assets/105215297/d66f4076-5da9-47f1-9906-cd3e75bc0245">
-uri에서 도메인, 프로토콜 등의 개념-

그럼 동일한 출처는 어떤 기준으로 판단할까?
바로 위 사진에서 프로토콜, 호스트, 포트 3가지만 같으면 동일한 출처라고 인식한다.
(단, 포트는 생략이 가능하다.)

```
http://Example.com:8080/ex1/index.html
http://example.com/ex2/index.html
```
프로토콜인 http, 호스트 example.com Port는 생략할 수 있고 패스부터 다르니 동일한 출처라고 할 수 있다.

## 문제
> 음 그런데 다른 출처에 접근하면 왜 안돼?

사실 애초에 다른 출처에 접근하는 것부터 불안하긴 하다.
가상의 A 사이트의 스크립트가 B 사이트의 데이터에 접근한다고 해보자. 별로 중요한 내용이 없다면
괜찮을 수 있지만 은행, 개인정보 등의 내용이 들어가있는 사이트라면? 악의적인 스크립트를 보낼 수 있으니 
반드시 보안을 신경써서 막아야한다.

## SOP
Same-Origin-Policy의 약자로 동일 출처 정책이라는 뜻이다. 
웹에서는 크게 SOP, CORS 2개의 정책이 있는데 CORS는 교차 출처에 접근할 수 있게한다.
당연히 SOP는 같은 출처에서만 리소스를 공유할 수 있게 한다.

특히, Postman같은 가상의 요청을 날릴 수 있는 것에서는 잘 요청되다가 웹에서 요청만 하면 CORS가 발생하는 문제가 생겼을 것이다.
이는 브라우저가 SOP를 지키고 있기 때문에 헤더에서 CORS 설정을 하지 않으면 정책을 지키라는 문구가 나타나게 되는 것이다.

