# 브라우저 작동 원리

## 브라우저
동기적으로 HTML + CSS, JavaScript 언어를 해석해 내용을 화면에 보여주는 응용 소프트웨어이다.

브라우저가 동기적인 이유는 웹 서버에 필요한 자원을 요청하면 서버는 응답하고 웹 브라우저는 이를 해석한 후에

사용자에게 보여주게된다. 여기서 말하는 자원은 보통 HTML 문서이지만 PDF, 이미지 등의 다양한 형태일 수 있다.

자원의 주소는 URI로 되어있다. 

### 구조
![image](https://github.com/likegitman/TIL/assets/105215297/f59dc7d5-aba4-4204-9208-25ccd3e7d8f4)

#### User Interface
사용자가 접근할 수 있는 영역입니다. URI를 입력할 수 있는 주소 표시줄, 이전/다음 버튼, 

북마크, 새로 고침 버튼 등 요청한 페이지를 보여주는 창을 제외한 모든 부분이다.

#### Browser Engine
사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어하는 엔진이다. HTML 문서와 기타 자원의 웹페이지를

사용자의 장치에 시각 표현으로 변환시키며 DOM 자료구조를 구현한다. 레이아웃 엔진이라고도 불리며 렌더링 엔진과

밀접하게 연관이 있으며 브라우저 엔진과 렌더링 엔진을 묶어 브라우저 엔진이라고도 부를 정도다.

브라우저마다 사용하는 엔진이 다른다.

- Blink: Chrom, Opera
- Gecko: Firefox
- Webkit: Safari
- Trident: outlook, express, microsoft outlook

#### Rendering Engine
요청한 콘텐츠를 화면에 출력하는 엔진이다. HTML과 CSS를 파시앟여 최종적으로 화면에 그려주며 HTML, XML 문서와

이미지를 표시할 수 있다. 브라우저는 서버로부터 HTML 문서를 응답받으면 렌더링 엔진의 HTML parser와 CSS parser에 의해

파싱되어 DOM, CSSOM 트리로 변환되고 렌더 트리로 결합된다. 이렇게 생성된 렌더 트리를 기반으로 브라우저는

웹 페이지를 나타내게된다.

#### Network
HTTP 요청과 같은 서버와 통신이 가능하게 하는 네트워크 호출에 사용된다.

#### UI Backend
렌더링 엔진이 분석한 렌더 트리를 브라우저에 그리는 역할을 한다. select나 input과 같은 기본적인 위젯을 그려준다.

플랫폼에서 명시하지 않은 일반적인 인터페이스로 운영체제 사용자 인터페이스 체계를 사용한다.

여기서 말하는 사용자 인터페이스는 CLI, BI, GUI 등을 말한다.

#### 자료 저장소
영구적인 저장소인 Local Storage와 임시 저장소인 Session Storage를 따로 두어 환경에 맞는 선택이 가능하다.

웹 브라우저가 직접 데이터를 저장할 수 있게 해줘서 사용자 측에서 좀 더 많은 정보를 안전하게 저장할 수 있다.

이런 웹 스토리지의 정보는 서버로 전송되지 않고 클라이언트가 저장하고 있기 때문에 네트워크 트래픽도 줄여준다.

## 동작 원리
![image](https://github.com/likegitman/TIL/assets/105215297/a9e6733d-c6f3-4086-8c14-9cf792053153)

### 사용자
브라우저를 통해 찾고 싶은 웹 페이지의 URL 주소를 입력하거나 클릭한다.

### DNS 서버
사용자가 입력한 URL 주소 중 도메인 네임을 검색하고 도메인 네임에 일치하는 IP 주소를 찾아서

사용자가 입력한 URL 정보와 함께 전달한다.

### HTTP 프로토콜
전달받은 IP 주소와 웹 페이지 URL 정보는 HTTP 프로토콜을 사용하여 HTTP 요청 메세지를 생성한다.

### TCP/IP 프로토콜
HTTP 요청 메세지는 TCP 프로토콜을 사용해 인터넷을 거쳐서 해당 IP 컴퓨터로 전송되고 도착한 요청 메세지는

HTTP 프로토콜을 이용해 웹 페이지 URL 정보로 변환된다.

### 웹 서버
변환된 정보에 해당하는 데이터를 검색하여 찾아낸 뒤 HTTP 응답 메세지를 생성한다. HTTP 응답 메세지는

다시 TCP 프로토콜을 사용해 인터넷을 거쳐서 사용자의 컴퓨터로 전송되고 이렇게 도착한 HTTP 응답 메세지는

HTTP 프로토콜을 이용해 웹 페이지 데이터로 변환된다.

### 웹 브라우저
변환된 데이터가 웹 브라우저에 출력되어 사용자가 볼 수 있게된다.
